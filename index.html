<html>

<head>
    <!-- Game and UI Plugin -->

    <script src=game.ts?1105 type=module></script>


    <title>Dystopia App Web Game</title>
    <meta charset=utf-8>
    <meta name=apple-mobile-web-app-capable content=yes>
    <meta name=mobile-web-app-capable content=yes>
    <link rel=icon type=image/png href=./favicon.png>
    
    <link rel="stylesheet" href="source_code/styles/styles.css">
    <link rel="stylesheet" href="source_code/styles/stats.css">
    <link rel="stylesheet" href="source_code/styles/heartbox.css">
    <link rel="stylesheet" href="source_code/styles/gamehud.css">
    <link rel="stylesheet" href="source_code/styles/ingame_menu.css">
    
    <!-- SEO optimisation for google and older search engines-->
    <!-- Open Graph (Facebook, LinkedIn) -->
    <meta name="keywords"
        content="Dystopia App, game, webgame ,cyberpunk, webcomic, noir, 8-bit, adventure, anime, cartoon">
    <meta property="og:title" content="Dystopia App - Gameboy Survival RPG Game">
    <meta property="og:description" content="A thrilling cyberpunk web game about survival in a application.">
    <meta property="og:image" content="./title-art_2.jpg">
    <meta property="og:url" content="">

    <!-- Twitter Card SEO -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Dystopia App - Cyberpunk WebGame">
    <meta name="twitter:description"
        content="Play Dystopia App, a Gameboy style survival cyberpunk adventure. You are a 4th WOrlder, Survive!">
    <meta name="twitter:image" content="./title-art_2.jpg">

    <!-- Adsense Ads -->
   <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3900377589557710" crossorigin="anonymous"></script>


</head>

<body>
    <!--Create Divs for Each Canvas Layer for UI and 3D -->
    <!-- Background Layer -->
    <div id="background-layer" class="layer"></div>
    <div id="threejs-layer" class="layer"></div>
    
    <!-- Three.js Layer -->
    <canvas id="threejs-layer" class="layer"></canvas>
    
    <!-- UI Layer (LittleJS Canvas or 2D Overlays) -->
    <canvas id="littlejs-2d-layer" class="layer"></canvas>
    


        <!-- UI Container -->
    <!-- Left Column: Wallet, Dialogue, Status -->
    <div id="left-buttons" class="left-buttons">  </div>

    <!-- Top-Right Heart Box + Menu -->
    <div id="top-right-ui" class="top-right-ui"></div>
    
    <!-- Game HUD container -->
    <div id="hud" class="parent">
      <!-- Main Container -->
                        

        <!-- Stats Panel Div-->
        <div class="statspanel">
              <!-- Icon or Visual Box for Stats -->
              <div class="dashboard" ></div>

              <!-- Stats Title -->
              <span class="v11_5">Stats</span>

              <!-- Kill Count Label -->
              <span class="v11_6">Kill Count :</span>
        </div>
        <!-- Tab Buttons -->
        <button class="v12_14"></button>
        <button class="v12_15"></button>
        <button class="v12_16"></button>
        <button class="v12_17"></button>



    </div>
    <div id="menu-container" class="menu-container"></div>
    
    <!-- Mobile Debug -->
    <div id="debug"></div>




  <!-- Yandex Games SDK --> 
<script>
    // temporarily disabled for itch io maintenance build
    // Load the Yandex Games SDK dynamically
    ///*
    const sdkScript = document.createElement('script');
    sdkScript.src = '/sdk.js';
    sdkScript.async = true;

    sdkScript.onload = () => {
      if (typeof YaGames !== 'undefined') {
        YaGames.init().then(sdk => {
          console.log('Yandex SDK initialized');
          window.ysdk = sdk;


                  // yandex games logic
        // documentation : https://yandex.com/dev/games/doc/en/sdk/sdk-game-events#gameready.
        
            // to do:
            // (1) implement yandex ads properly with a global singleton class that handles error
            // (2) improper yandex ads implementation might be what crashes iphone browsers
        

          // Informing the platform that the game has loaded and is ready to play.
          sdk.features.LoadingAPI?.ready()

          // works:
          // (1) port initialisation logic to typescript with proper error handling / debugging
          // (2) implement ads into gameplay via shop 
          // (3) implement rewarded ads ligic

          // ad call 
          sdk.adv.showFullscreenAdv({
            callbacks: {
              onOpen: () => console.log('Ad opened'),
              onClose: wasShown => console.log('Ad closed:', wasShown),
              onError: err => console.error('Ad error:', err)
            }
          });

        }).catch(err => {
          console.warn('YaGames.init() failed:', err);
        });
      } else {
        console.warn('YaGames is not defined after script loaded');
      }
    };

    sdkScript.onerror = () => {
      console.warn('⚠️ Yandex SDK failed to load: sdk.js not found or blocked.');
    };

    document.head.appendChild(sdkScript);

    //*/
</script>

  <!-- Google tag (gtag.js) for google analytics on my private hosting --> 
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-4XTFM74YY1"></script> 
  <script>
      
      ///*
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-4XTFM74YY1');
      //*/
  </script>
    
  <!-- Statically preload all image files-->
  <img src="./player_tileset_128x128.webp" style="display:none">
  <img src="./enemy_tileset_128x128.webp" style="display:none">
  <img src="./godot_128x_dungeon_tileset.webp" style="display:none">
  <img src="./tiles.png" style="display:none">
  <img src="./btn-mask.png" style="display: none;">
  <img src="./btn-interact.png" style="display: none;">
  <img src="./btn-mask.png" style="display: none;">
  <img src="./menu white.png" style="display: none;">
  <img src="./btn-stats.png" style="display: none;">


  <!-- all 3d model files-->
  <link href="./overworld_map.glb" as="fetch" type="model/gltf-binary">

  <!-- all json files (2d levels )-->
  <link href="./overworld.json" as="fetch" type="application/json" crossorigin="anonymous">
  <link href="./OverworldSideScrolling.json" as="fetch" type="application/json" crossorigin="anonymous">

  <!-- all audio files-->
  <script src="./audio/songs/depp.js" ></script>
  <script src="./audio/songs/sanxion.js"></script>
  <script src="./audio/songs/cuddly.js" ></script>
  <script src="./audio/songs/iamback.js"></script>
  
</body>
</html>